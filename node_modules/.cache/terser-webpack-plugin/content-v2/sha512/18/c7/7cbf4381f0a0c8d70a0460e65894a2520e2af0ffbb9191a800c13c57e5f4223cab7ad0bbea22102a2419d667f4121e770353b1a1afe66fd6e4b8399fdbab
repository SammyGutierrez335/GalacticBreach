{"code":"!function(e){var s={};function t(i){if(s[i])return s[i].exports;var h=s[i]={i:i,l:!1,exports:{}};return e[i].call(h.exports,h,h.exports,t),h.l=!0,h.exports}t.m=e,t.c=s,t.d=function(e,s,i){t.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:i})},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,s){if(1&s&&(e=t(e)),8&s)return e;if(4&s&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&s&&\"string\"!=typeof e)for(var h in e)t.d(i,h,function(s){return e[s]}.bind(null,h));return i},t.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(s,\"a\",s),s},t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},t.p=\"\",t(t.s=0)}([function(e,s,t){\"use strict\";t.r(s),t.d(s,\"default\",(function(){return a}));class i{constructor(e){this.speed=e.speed,this.x=e.x,this.y=e.y,this.height=32,this.width=32,this.imgSrc=e.imgSrc}renderImg(e){e.src=this.imgSrc}moveBullet(e,s,t,i){this.x+=e}}class h{constructor(e){this.speed=e.speed,this.x=e.x,this.y=e.y,this.height=64,this.width=64,this.imgSrc=e.imgSrc,this.deltaX=0,this.deltaY=0,this.keyPresses={},this.keyDownListener=this.keyDownListener.bind(this),this.keyUpListener=this.keyUpListener.bind(this),window.addEventListener(\"keydown\",this.keyDownListener,!1),window.addEventListener(\"keyup\",this.keyUpListener,!1)}keyDownListener(e){this.keyPresses[e.key]=!0}keyUpListener(e){this.keyPresses[e.key]=!1,this.deltaX=0,this.deltaY=0}renderImg(e){e.src=this.imgSrc}moveShip(e){let s=this.speed,t=this.speed;this.keyPresses.w?this.deltaY=-t:this.keyPresses.s&&(this.deltaY=t),this.keyPresses.a?this.deltaX=-s:this.keyPresses.d&&(this.deltaX=s),this.x+this.deltaX>0&&this.x+64+this.deltaX<e.width&&(this.x+=this.deltaX),this.y+this.deltaY>0&&this.y+64+this.deltaY<e.height&&(this.y+=this.deltaY)}}class n{constructor(e){this.speed=e.speed,this.x=e.x,this.y=e.y,this.height=64,this.width=64,this.imgSrc=e.imgSrc,this.offScreen=!0}renderImg(e){e.src=this.imgSrc}moveEnemy(e){this.x+e===-100&&(this.offScreen=!0),this.x-=e}}class a{constructor(e,s){this.canvas=e,this.ctx=s,this.CYCLE_LOOP=[],this.frameCount=0,this.FRAME_LIMIT=5,this.currentLoopIndex=0,this.spaceshipImage=new Image,this.ships=[],this.enemyImage=new Image,this.enemies=[],this.bulletImage=new Image,this.bullets=[],this.bgImageX=0,this.bgImageFlippedX=e.width,this.shotsFired=!1,this.spaceAmbience=null,this.battleMusic=new Audio(\"assets/soundfx/space-battle.mp3\"),this.levelUpSfx=new Audio(\"assets/soundfx/fx/incoming-radar(louder).mp3\"),this.damage1=new Audio(\"assets/soundfx/fx/damage-1.mp3\"),this.damage2=new Audio(\"assets/soundfx/fx/damage-2.mp3\"),this.damage3=new Audio(\"assets/soundfx/fx/damage-3.mp3\"),this.drawFrame=this.drawFrame.bind(this),this.gameloop=this.gameloop.bind(this),this.remove=this.remove.bind(this),this.maxEnemies=3,this.score=0,this.playerLevel=1,this.numHits=0,this.playerInvicibility=!1,this.slippynoooooo=!1}addEnemy(){if(this.enemies.length<this.maxEnemies){let e=new n({speed:Math.ceil(5*Math.random()),x:this.getRandomX(),y:this.getRandomY(),imgSrc:\"assets/attackers/atom.png\"});this.enemies.push(e),e.renderImg(this.enemyImage)}}getRandomX(){return Math.random()*(1200-this.canvas.width)+this.canvas.width}getRandomY(){return 440*Math.random()}addShip(){this.spaceAmbience=new Audio(\"assets/soundfx/Space Ambience.mp3\"),this.spaceAmbience.play();let e=new h({hasMoved:!1,speed:4,x:50,y:200,imgSrc:\"assets/player/playership.png\"});this.ships.push(e),e.renderImg(this.spaceshipImage)}addBullet(e){this.bullets.push(e),e.renderImg(this.bulletImage),new Audio(\"assets/soundfx/fx/shot-1.mp3\").play(),this.shotsFired||(this.shotsFired=!0,this.spaceAmbience.pause(),this.battleMusic.play())}checkCollision(e,s){return e.x<s.x+s.width&&e.x+e.width>s.x&&e.y<s.y+s.height&&e.y+e.height>s.y}remove(e,s){if(e instanceof i)this.bullets.splice(this.bullets.indexOf(e),1);else if(e instanceof n)this.enemies.splice(this.enemies.indexOf(e),1),s&&this.remove(s),this.score+=1,this.score===10*this.playerLevel&&(this.playerLevel+=1,this.maxEnemies+=3,this.levelUpSfx.play(),console.log(\"score:\",this.score),console.log(\"level:\",this.playerLevel));else{if(!(e instanceof h))throw new Error(\"unknown type of object\");this.ships.shift()}}takeDamage(){this.numHits+=1,this.playerInvicibility=!1,1===this.numHits?this.damage1.play():2===this.numHits?this.damage2.play():3===this.numHits?this.damage3.play():this.slippynoooooo=!0}drawFrame(e,s){let t=this.ctx,i=new Image,h=this.ships[0],n=this.spaceshipImage,a=this.enemyImage,r=this.bulletImage;if(i.src=\"assets/backgrounds/bg1.png\",(new Image).src=\"assets/backgrounds/bg1-flipped-edged.png\",t.fillText(\"Score : \"+this.score,450,50),t.drawImage(n,e%16*h.width,s*h.height,h.width,h.height,h.x,h.y,57.6,57.6),this.enemies.length>0&&this.enemies.length<=this.maxEnemies)for(let i=0;i<this.enemies.length;i++){let h=this.enemies[i];h.moveEnemy(h.speed,0,0,this.canvas),this.checkCollision(this.ships[0],h)&&!this.playerInvicibility&&setTimeout(this.takeDamage(),5e3),t.drawImage(a,e%24*h.width,s*h.height,h.width,h.height,h.x,h.y,57.6,57.6),h.x<0&&this.remove(h,null)}if(this.bullets.length>=0)for(let s=0;s<this.bullets.length;s++){let i=this.bullets[s];i.moveBullet(i.speed,0,0,this.canvas),t.drawImage(r,e%4,0,32,32,i.x,i.y,32,32),i.x>this.canvas.width&&this.remove(i);for(let e=0;e<this.enemies.length;e++){let s=this.enemies[e];this.checkCollision(s,i)&&this.remove(s,i)}}}gameloop(){let e=this.ships[0];if(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.enemies.length<this.maxEnemies&&this.addEnemy(),e.keyPresses[\" \"]){let s=new i({speed:6,x:e.x+13,y:e.y+5,imgSrc:\"assets/fx/bullet_blue.png\"});e.keyPresses[\" \"]=!1,this.addBullet(s)}e.moveShip(this.canvas),this.frameCount++,this.frameCount>=this.FRAME_LIMIT&&(this.frameCount=0,this.currentLoopIndex++,this.currentLoopIndex>=this.CYCLE_LOOP.length&&(this.currentLoopIndex=0)),this.drawFrame(this.CYCLE_LOOP[this.currentLoopIndex],0);let s=window.requestAnimationFrame(this.gameloop);this.slippynoooooo&&window.cancelAnimationFrame(s)}}}]);","extractedComments":[]}